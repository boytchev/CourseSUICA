<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<script src="suica.js"></script>
</head>

<body>
	<suica fullWindow onTime="loop">
		<!-- координатна система в XY -->
		<line from="-1,0,0" to="13.5,0,0">
		<line from="0,-1.5,0" to="0,1.5,0">
		<cone y="1.5" size="0.05,0.1,0" color="black">
		<cone x="13.5" size="0,0.1,0.05" color="black" spin="90,90">
	</suica>
	
	<script>
		// червени трасиращи точки
		n = 60;
		points = [];
		for( var i=0; i<n; i++ )
			points[i] = point( [0,100,0], 0.2, 'crimson');
	
		// деления по оста X
		for( var i=1; i<14; i++ )
			line( [i,0.1,0], [i,-0.1,0], 'gray');
	
		var idx = 0;
		function loop( t )
		{
			// място по X където да е гледната точка
			var x = t/2;
		
			// само при x<13 се прави плъзгане
			if( x < 13 )
			{
				// рисуване на трасираща точка
				i = Math.floor(4*t) % n;
				
				points[i].x = x;
				points[i].y = Math.sin( x );
				
				// плъзгане на гледната точка
				lookAt( [x-2,0,6], [x-2,0,0], [0,1,0] );
			}
		}

	</script>
</head>

