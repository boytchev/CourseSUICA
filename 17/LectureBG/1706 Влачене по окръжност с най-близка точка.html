<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<script src="suica.js"></script>
</head>

<body>
	<suica fullWindow orthographic="1,1000" onPointerDown="pointerDown" onPointerUp="pointerUp" onPointerMove="pointerMove">
		<lookat from="0,0,100">
		
		<!-- окръжност, по която се влачи -->
		<circle size="400" color="black" wireframe>
		
		<!-- малко кръстче в средата -->
		<line from="-20,0,0" to="20,0,0" color="lightgray">
		<line from="0,-20,0" to="0,20,0" color="lightgray">
		
		<!-- влачена сфера -->
		<sphere id="a" y="-200" size="60,60,10" color="orange">
	</suica>
	
	<script>
		obj = null;
		
		// хващане на обект при натискане на бутон
		function pointerDown( event )
		{
			obj = findObject( event );
		}

		// пускане на обект при пускане на бутон
		function pointerUp( event )
		{
			obj = null;
		}

		// движение на хванат обект при движение на мишката
		function pointerMove( event )
		{
			if( obj )
			{
				// векторът от (0,0,0) до позицията на мишката
				// се скъсява или удължава толкова, че да стига
				// точно до окръжността -- там е най-близката точка
				var pos = findPosition( event ),
					d = Math.sqrt( pos[0]**2 + pos[1]**2 )
					r = 200;

				a.center = [ pos[0] * r/d, pos[1] * r/d, 0];
			}
		}
	</script>
</head>